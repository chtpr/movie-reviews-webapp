{"ast":null,"code":"var _jsxFileName = \"/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx\",\n    _s = $RefreshSig$();\n\nimport Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { format } from 'date-fns'; // import { useAlert } from 'react-alert';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieEntry(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    username,\n    setUsername,\n    loggedIn,\n    setLoggedIn\n  } = useContext(Context);\n  const [movie, setMovie] = useState();\n  const [reviewText, setReviewText] = useState('');\n  const [curMovieTitle, setCurMovieTitle] = useState('');\n  const [reviewSet, setReviewSet] = useState([]);\n  const [showEdit, setShowEdit] = useState(true);\n  const [submitText, setSubmitText] = useState(\"\");\n  const reviewComponent = [];\n  const editFormIds = [];\n  const params = useParams(); // const alert = useAlert();\n\n  useEffect(() => {\n    Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId).then(function (response) {\n      setMovie(response.data);\n      setCurMovieTitle(response.data.movieTitle);\n      console.log(response.data.movieTitle);\n    });\n  }, []);\n  useEffect(() => {\n    console.log(\"movie state changed\");\n    getReviews();\n  }, [curMovieTitle]);\n\n  function getReviews() {\n    Axios.get('http://localhost:8000/api/reviews/getByMovie/' + curMovieTitle).then(function (response) {\n      setReviewSet(response.data);\n      console.log(\"get\");\n      console.log(response.data);\n    });\n  }\n\n  function addNewReview() {\n    if (loggedIn) {\n      Axios.post('http://localhost:8000/api/reviews', {\n        reviewText,\n        username,\n        curMovieTitle\n      }).then(response => {\n        console.log(\"Added review\");\n        console.log(response.data);\n        navigate('/movie/movieID/' + movie._id);\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"User must be logged in to submit review\");\n    }\n  }\n\n  function deleteReview(e) {\n    if (username === e.target.value) {\n      Axios.delete('http://localhost:8000/api/reviews/' + e.target.id).then(response => {\n        console.log(\"deleted review\");\n        console.log(response.data);\n        navigate('/home');\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"You are not the owner of this review\");\n    }\n  }\n\n  function editReview(e) {\n    if (username === e.target.value) {\n      console.log(\"target update id: \" + e.target.id);\n      console.log(\"target update text: \" + submitText);\n      Axios.put('http://localhost:8000/api/reviews/' + e.target.id, {\n        submitText,\n        username,\n        curMovieTitle\n      }).then(response => {\n        console.log(\"updated review\");\n        console.log(response.data);\n        setSubmitText(''); // navigate('/home');\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"You are not the owner of this review\");\n    }\n  }\n\n  function enableEditField() {\n    setShowEdit(!showEdit);\n  }\n\n  if (!movie) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Movie loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }, this);\n  }\n\n  for (let review of reviewSet) {\n    reviewComponent.push( /*#__PURE__*/_jsxDEV(Card, {\n      variant: \"outlined\",\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: review.owner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Published \", review.creationDate]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: review.reviewText\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                size: \"large\",\n                onClick: enableEditField,\n                value: review.owner,\n                id: review._id,\n                label: \"edit\",\n                children: \"Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(TextField, {\n                size: \"small\",\n                disabled: showEdit,\n                value: submitText,\n                onChange: e => {\n                  setSubmitText(e.target.value);\n                  console.log(\"field: \" + submitText);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                disabled: showEdit,\n                size: \"large\",\n                onClick: editReview,\n                value: review.owner,\n                id: review._id,\n                children: \"Submit Edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                size: \"large\",\n                onClick: deleteReview,\n                value: review.owner,\n                id: review._id,\n                label: \"delete\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: movie.movieTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Movie Image will be displayed here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Director: \", movie.director]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Date Created: \", format(new Date(), 'do MMMM Y'), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: movie.releaseDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Description: \", movie.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              margin: 'dense',\n              label: \"Review Content\",\n              value: reviewText,\n              onChange: e => setReviewText(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: addNewReview,\n              children: \"Submit Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }, this), reviewComponent]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MovieEntry, \"lCI83wHZ1DAYegBHcp1to/VfWVE=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = MovieEntry;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieEntry\");","map":{"version":3,"sources":["/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx"],"names":["Axios","React","useState","useEffect","useContext","useCallback","useParams","useNavigate","Context","Card","CardContent","Typography","Button","TextField","format","MovieEntry","props","navigate","username","setUsername","loggedIn","setLoggedIn","movie","setMovie","reviewText","setReviewText","curMovieTitle","setCurMovieTitle","reviewSet","setReviewSet","showEdit","setShowEdit","submitText","setSubmitText","reviewComponent","editFormIds","params","get","movieId","then","response","data","movieTitle","console","log","getReviews","addNewReview","post","_id","catch","error","deleteReview","e","target","value","delete","id","editReview","put","enableEditField","review","push","owner","creationDate","director","Date","releaseDate","description"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { format } from 'date-fns';\n// import { useAlert } from 'react-alert';\n\n\nexport default function MovieEntry(props) {\n\n    const navigate = useNavigate();\n    const {username, setUsername, loggedIn, setLoggedIn} = useContext(Context);\n    const [movie, setMovie] = useState();\n    const [reviewText, setReviewText] = useState('');\n    const [curMovieTitle, setCurMovieTitle] = useState('');\n    const [reviewSet, setReviewSet] = useState([]);\n    const [showEdit, setShowEdit] = useState(true);\n    const [submitText, setSubmitText] = useState(\"\");\n    const reviewComponent = [];\n    const editFormIds = [];\n    const params = useParams();\n    // const alert = useAlert();\n\n    useEffect(() => {\n        Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId)\n            .then(function(response) {\n            setMovie(response.data);\n            setCurMovieTitle(response.data.movieTitle);\n            console.log(response.data.movieTitle)\n            })\n    }, []);\n\n    useEffect(() => {\n        console.log(\"movie state changed\");\n        getReviews();\n    }, [curMovieTitle])\n\n    function getReviews() {\n        Axios.get('http://localhost:8000/api/reviews/getByMovie/' + curMovieTitle)\n            .then(function (response) {\n                setReviewSet(response.data);\n                console.log(\"get\");\n                console.log(response.data);\n            })\n    }\n\n    function addNewReview() {\n        if (loggedIn) {\n            Axios.post('http://localhost:8000/api/reviews', {reviewText, username, curMovieTitle})\n                .then(response => {\n                    console.log(\"Added review\");\n                    console.log(response.data);\n                    navigate('/movie/movieID/' + movie._id);\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"User must be logged in to submit review\");\n        }\n    }\n\n    function deleteReview(e) {\n        if (username === e.target.value) {\n            Axios.delete('http://localhost:8000/api/reviews/' + e.target.id)\n                .then(response => {\n                    console.log(\"deleted review\");\n                    console.log(response.data);\n                    navigate('/home');\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"You are not the owner of this review\")\n        }\n    }\n\n    function editReview(e) {\n        if (username === e.target.value) {\n            console.log(\"target update id: \" + e.target.id);\n            console.log(\"target update text: \" + submitText);\n            Axios.put('http://localhost:8000/api/reviews/' +  e.target.id , {submitText, username, curMovieTitle})\n                .then(response => {\n                    console.log(\"updated review\");\n                    console.log(response.data);\n                    setSubmitText('');\n                    // navigate('/home');\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"You are not the owner of this review\")\n        }\n    }\n\n    function enableEditField() {\n        setShowEdit(!showEdit);\n    }\n\n    if (!movie) {\n        return (<div>\n            Movie loading...\n        </div>)\n    }\n\n\n    for (let review of reviewSet) {\n        \n        reviewComponent.push(\n        <Card variant='outlined'>\n        <CardContent>\n        <Typography >\n        <div>\n            <h4>{review.owner}</h4>\n            <p>Published {review.creationDate}</p>\n            <br></br>\n            <p>{review.reviewText}</p>\n            <br></br>\n            <p>\n            <Button \n                size='large' \n                onClick={enableEditField} \n                value={review.owner} \n                id={review._id} \n                label='edit'\n                >\n                Edit\n            </Button>\n            <TextField\n                size='small'\n                disabled={showEdit}\n                value={submitText}\n                onChange={(e) => {\n                    setSubmitText(e.target.value)\n                    console.log(\"field: \" + submitText);\n                }}\n            />\n            </p>\n            <p>\n            <Button disabled={showEdit} size='large' onClick={editReview} value={review.owner} id={review._id}>\n                    Submit Edit\n            </Button>\n            <Button \n                size='large' \n                onClick={deleteReview} \n                value={review.owner} \n                id={review._id} \n                label='delete'\n                >\n                Delete\n            </Button>\n            </p>\n        </div>\n        </Typography>\n        </CardContent>\n        </Card>\n        )\n    }\n\n\n    return (\n        <div>\n            <Card>\n                <CardContent>\n                    <Typography >\n                        <div>\n                        <h1>\n                            {movie.movieTitle} \n                        </h1>\n                        <h3>\n                            Movie Image will be displayed here\n                        </h3>\n                        <h3>\n                            Director: {movie.director}\n                        </h3>\n                        <h4>\n                            Date Created: {format(new Date(), 'do MMMM Y')}\n                            <div>{movie.releaseDate}</div>\n                        </h4>\n                        <h4>\n                            Description: {movie.description}\n                        </h4>\n                        \n                        <TextField fullWidth={true} margin={'dense'} label={\"Review Content\"} value={reviewText} onChange={e => setReviewText(e.target.value)} />\n                        <br/>\n                        <Button onClick={addNewReview}>\n                            Submit Review\n                        </Button>\n                        </div>\n                    </Typography>\n                </CardContent>\n            </Card>\n            <Typography ><h3>Reviews</h3></Typography>\n            {reviewComponent}\n        </div>     \n    )\n}\n"]},"metadata":{},"sourceType":"module"}