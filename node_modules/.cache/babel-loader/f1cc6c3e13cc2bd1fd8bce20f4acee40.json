{"ast":null,"code":"var _jsxFileName = \"/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx\",\n    _s = $RefreshSig$();\n\nimport Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { format } from 'date-fns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieEntry(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    username,\n    setUsername,\n    loggedIn,\n    setLoggedIn\n  } = useContext(Context);\n  const [movie, setMovie] = useState();\n  const [reviewText, setReviewText] = useState(\"\");\n  const [curMovieTitle, setCurMovieTitle] = useState('');\n  const [rerender, setRerender] = useState(false);\n  const [curMovieID, setCurMovieID] = useState('');\n  const [reviewSet, setReviewSet] = useState([]);\n  const [showReviewEdit, setShowReviewEdit] = useState(false);\n  const [submitText, setSubmitText] = useState(\"\");\n  const [showMovieEdit, setShowMovieEdit] = useState(false);\n  const [newMovieInfo, setNewMovieInfo] = useState({\n    newMovie: {\n      movieTitle: \"\",\n      director: \"\",\n      genre: \"\",\n      description: \"\"\n    }\n  });\n  const reviewComponent = [];\n  const params = useParams();\n  useEffect(() => {\n    Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId).then(function (response) {\n      setMovie(response.data);\n      setCurMovieID(response.data._id);\n      setCurMovieTitle(response.data.movieTitle);\n    });\n  }, []);\n  useEffect(() => {\n    getReviews();\n  }, [movie]);\n\n  const clear = () => {\n    setReviewText(\"\");\n  };\n\n  function getReviews() {\n    Axios.get('http://localhost:8000/api/reviews/getReviewsByMovieID/' + curMovieID).then(function (response) {\n      setReviewSet(response.data);\n      console.log(\"get\");\n    });\n  }\n\n  function addNewReview() {\n    if (loggedIn) {\n      Axios.post('http://localhost:8000/api/reviews', {\n        reviewText,\n        username,\n        curMovieID\n      }).then(response => {\n        console.log(\"Added review\");\n        getReviews();\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"User must be logged in to submit review\");\n    }\n  }\n\n  function showReview() {\n    Axios.get('http://localhost:8000/api/reviews/getByUsername/', {\n      username\n    }).then(response => {\n      console.log(\"show review\");\n      getReviews();\n    }).catch(error => console.log(error));\n  }\n\n  function deleteReview(e) {\n    if (username === e.target.value) {\n      Axios.delete('http://localhost:8000/api/reviews/' + e.target.id).then(response => {\n        console.log(\"deleted review\");\n        getReviews();\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"You are not the owner of this review\");\n    }\n  }\n\n  function editMovie(e) {\n    if (loggedIn) {\n      Axios.put('http://localhost:8000/api/movies/' + e.target.id, {\n        newMovieInfo\n      }).then(response => {\n        console.log(\"updated movie\");\n        navigate('/home/');\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"Must be logged in to edit\");\n    }\n  }\n\n  function editReview(e) {\n    if (username === e.target.value) {\n      console.log(\"target update id: \" + e.target.id);\n      console.log(\"target update text: \" + submitText);\n      Axios.put('http://localhost:8000/api/reviews/' + e.target.id, {\n        submitText,\n        username,\n        curMovieID\n      }).then(response => {\n        console.log(\"updated review\");\n        setSubmitText('');\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"You are not the owner of this review\");\n    }\n  }\n\n  function enableReviewEdit(e) {\n    if (loggedIn && username !== e.target.value) {\n      alert(\"Must be owner to edit\");\n    } else if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else {\n      setShowReviewEdit(!showReviewEdit);\n    }\n  }\n\n  function enableMovieEdit(e) {\n    if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else {\n      setShowMovieEdit(!showMovieEdit);\n    }\n  }\n\n  function handleMovieEditChange(e) {\n    console.log(\"name: \" + e.target.name);\n    console.log(\"value: \" + e.target.value);\n    setNewMovieInfo({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  if (!movie) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Movie loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }, this);\n  }\n\n  for (let review of reviewSet) {\n    if (review._id !== undefined) {\n      console.log(review._id);\n      reviewComponent.push( /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        id: review._id,\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: review.owner\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Published \", review.creationDate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.reviewText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: enableReviewEdit,\n                  value: review.owner,\n                  id: review._id,\n                  label: \"edit\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 169,\n                  columnNumber: 13\n                }, this), showReviewEdit && /*#__PURE__*/_jsxDEV(TextField, {\n                  size: \"small\",\n                  onChange: e => {\n                    setSubmitText(e.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [showReviewEdit && /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: editReview,\n                  value: review.owner,\n                  id: review._id,\n                  children: \"Submit Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 189,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: deleteReview,\n                  value: review.owner,\n                  id: review._id,\n                  label: \"delete\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: movie.movieTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Movie Image will be displayed here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Director: \", movie.director]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Date Created: \", format(new Date(), 'do MMMM Y'), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: movie.releaseDate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Description: \", movie.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              margin: 'dense',\n              label: \"Review Content\",\n              value: reviewText,\n              onChange: e => setReviewText(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                showReview();\n              },\n              children: \"Show Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                addNewReview();\n                clear();\n              },\n              children: \"Submit Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 13\n    }, this), reviewComponent, /*#__PURE__*/_jsxDEV(Button, {\n      onClick: enableMovieEdit,\n      children: \"Edit Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this), showMovieEdit && /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"titleEditField\",\n          label: \"New Movie Title\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"descriptionEditField\",\n          label: \"New Movie Description\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"directorEditField\",\n          label: \"New Movie Director\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          name: \"genreEditField\",\n          label: \"New Movie Genre\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: editMovie,\n          children: \"Submit Movie Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MovieEntry, \"L8QtQsfOuaMbvJykdfZhhFivoC4=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = MovieEntry;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieEntry\");","map":{"version":3,"sources":["/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx"],"names":["Axios","React","useState","useEffect","useContext","useCallback","useParams","useNavigate","Context","Card","CardContent","Typography","Button","TextField","format","MovieEntry","props","navigate","username","setUsername","loggedIn","setLoggedIn","movie","setMovie","reviewText","setReviewText","curMovieTitle","setCurMovieTitle","rerender","setRerender","curMovieID","setCurMovieID","reviewSet","setReviewSet","showReviewEdit","setShowReviewEdit","submitText","setSubmitText","showMovieEdit","setShowMovieEdit","newMovieInfo","setNewMovieInfo","newMovie","movieTitle","director","genre","description","reviewComponent","params","get","movieId","then","response","data","_id","getReviews","clear","console","log","addNewReview","post","catch","error","showReview","deleteReview","e","target","value","delete","id","editMovie","put","editReview","enableReviewEdit","alert","enableMovieEdit","handleMovieEditChange","name","review","undefined","push","owner","creationDate","Date","releaseDate"],"mappings":"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","sourcesContent":["import Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { format } from 'date-fns';\n\nexport default function MovieEntry(props) {\n\n    const navigate = useNavigate();\n    const {username, setUsername, loggedIn, setLoggedIn} = useContext(Context);\n    const [movie, setMovie] = useState();\n    const [reviewText, setReviewText] = useState(\"\");\n    const [curMovieTitle, setCurMovieTitle] = useState('');\n    const [rerender, setRerender] = useState(false);\n    const [curMovieID, setCurMovieID] = useState('');\n    const [reviewSet, setReviewSet] = useState([]);\n    const [showReviewEdit, setShowReviewEdit] = useState(false);\n    const [submitText, setSubmitText] = useState(\"\");\n    const [showMovieEdit, setShowMovieEdit] = useState(false);\n    const [newMovieInfo, setNewMovieInfo] = useState( {newMovie: {\n        movieTitle: \"\",\n        director: \"\",\n        genre: \"\",\n        description: \"\",\n    }});\n    const reviewComponent = [];\n    const params = useParams();\n\n    useEffect(() => {\n        Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId)\n            .then(function(response) {\n            setMovie(response.data);\n            setCurMovieID(response.data._id);\n            setCurMovieTitle(response.data.movieTitle);\n            })\n    }, []);\n\n    useEffect(() => {\n        getReviews();\n    }, [movie]);\n\n    const clear = () => {\n        setReviewText(\"\");\n    };\n\n    function getReviews() {\n        Axios.get('http://localhost:8000/api/reviews/getReviewsByMovieID/' + curMovieID)\n            .then(function (response) {\n                setReviewSet(response.data);\n                console.log(\"get\");\n            })\n    }\n\n    function addNewReview() {\n        if (loggedIn) {\n            Axios.post('http://localhost:8000/api/reviews', {reviewText, username, curMovieID})\n                .then(response => {\n                    console.log(\"Added review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"User must be logged in to submit review\");\n        }\n    }\n\n    function showReview() {\n            Axios.get('http://localhost:8000/api/reviews/getByUsername/', {username})\n                .then(response => {\n                    console.log(\"show review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n    }\n\n    function deleteReview(e) {\n        if (username === e.target.value) {\n            Axios.delete('http://localhost:8000/api/reviews/' + e.target.id)\n                .then(response => {\n                    console.log(\"deleted review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"You are not the owner of this review\")\n        }\n    }\n\n    function editMovie(e) {\n        if (loggedIn) {\n            Axios.put('http://localhost:8000/api/movies/' +  e.target.id , {newMovieInfo})\n                .then(response => {\n                    console.log(\"updated movie\");\n                    navigate('/home/');\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"Must be logged in to edit\")\n        }\n    }\n\n    function editReview(e) {\n        if (username === e.target.value) {\n            console.log(\"target update id: \" + e.target.id);\n            console.log(\"target update text: \" + submitText);\n            Axios.put('http://localhost:8000/api/reviews/' +  e.target.id , {submitText, username, curMovieID})\n                .then(response => {\n                    console.log(\"updated review\");\n                    setSubmitText('');\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"You are not the owner of this review\")\n        }\n    }\n\n    function enableReviewEdit(e) {\n        if (loggedIn && username !== e.target.value) {\n            alert(\"Must be owner to edit\");\n        } else if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else {\n            setShowReviewEdit(!showReviewEdit);\n        }\n    }\n\n    function enableMovieEdit(e) {\n        if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else {\n            setShowMovieEdit(!showMovieEdit);\n        }\n    }\n\n    function handleMovieEditChange(e) {\n        console.log(\"name: \" + e.target.name)\n        console.log(\"value: \" + e.target.value)\n        setNewMovieInfo({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    if (!movie) {\n        return (<div>\n            Movie loading...\n        </div>)\n    }\n    \n    for (let review of reviewSet) {\n        if (review._id !== undefined) {\n        console.log(review._id)\n        reviewComponent.push(\n        <Card variant='outlined' id={review._id} >\n        <CardContent>\n        <Typography >\n        <div>\n            <h4>{review.owner}</h4>\n            <p>Published {review.creationDate}</p>\n            <br></br>\n            <p>{review.reviewText}</p>\n            <br></br>\n            <p>\n            <Button \n                size='large' \n                onClick={enableReviewEdit} \n                value={review.owner} \n                id={review._id} \n                label='edit'\n                >\n                Edit\n            </Button>\n            {showReviewEdit &&\n            <TextField\n                size='small'\n                onChange={(e) => {\n                    setSubmitText(e.target.value)\n                }}\n            />\n            }\n            </p>\n            <p>\n            {showReviewEdit &&\n            <Button \n                size='large' \n                onClick={editReview} \n                value={review.owner} \n                id={review._id}\n                >\n                    Submit Edit\n            </Button>\n            }\n            <Button \n                size='large' \n                onClick={deleteReview} \n                value={review.owner} \n                id={review._id} \n                label='delete'\n                >\n                Delete\n            </Button>\n            </p>\n        </div>\n        </Typography>\n        </CardContent>\n        </Card>\n        )\n    }\n}\n\n\n\n\n\n\n\n\n\n\n    return (\n        <div>\n            <Card>\n                <CardContent>\n                    <Typography >\n                        <div>\n                        <h1>\n                            {movie.movieTitle} \n                        </h1>\n                        <h3>\n                            Movie Image will be displayed here\n                        </h3>\n                        <h3>\n                            Director: {movie.director}\n                        </h3>\n                        <h4>\n                            Date Created: {format(new Date(), 'do MMMM Y')}\n                            <div>{movie.releaseDate}</div>\n                        </h4>\n                        <h4>\n                            Description: {movie.description}\n                        </h4>\n                        \n                        <TextField \n                            fullWidth={true} \n                            margin={'dense'} \n                            label={\"Review Content\"} \n                            value={reviewText} \n                            onChange={e => setReviewText(e.target.value)} \n                            />\n                        <br/>\n\n                        <Button onClick={() => {showReview();}}>\n                            Show Review\n                        </Button>\n\n                        <Button onClick={() => {addNewReview(); clear();}}>\n                            Submit Review\n                        </Button>\n                        </div>\n                    </Typography>\n                </CardContent>\n            </Card>\n            <Typography ><h3>Reviews</h3></Typography>\n            {reviewComponent}\n            <Button onClick={enableMovieEdit}>\n                Edit Movie\n            </Button>\n            {showMovieEdit && \n                <Card>\n                    <div>\n                    <TextField\n                        name=\"titleEditField\"\n                        label={\"New Movie Title\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        name=\"descriptionEditField\"\n                        label={\"New Movie Description\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        name=\"directorEditField\"\n                        label={\"New Movie Director\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        name=\"genreEditField\"\n                        label={\"New Movie Genre\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <Button onClick={editMovie}>\n                        Submit Movie Edit\n                    </Button>\n                    </div>\n                </Card>\n                }\n        </div>     \n    )\n}\n"]},"metadata":{},"sourceType":"module"}