{"ast":null,"code":"var _jsxFileName = \"/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx\",\n    _s = $RefreshSig$();\n\nimport Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MovieEntry(props) {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    username,\n    setUsername,\n    loggedIn,\n    setLoggedIn\n  } = useContext(Context);\n  const [movie, setMovie] = useState();\n  const [reviewText, setReviewText] = useState(\"\");\n  const [curMovieTitle, setCurMovieTitle] = useState('');\n  const [curMovieID, setCurMovieID] = useState('');\n  const [reviewSet, setReviewSet] = useState([]);\n  const [showReviewEdit, setShowReviewEdit] = useState(false);\n  const [submitText, setSubmitText] = useState(\"\");\n  const [showMovieEdit, setShowMovieEdit] = useState(false);\n  const [newMovieInfo, setNewMovieInfo] = useState({\n    newMovie: {\n      movieTitle: \"\",\n      director: \"\",\n      genre: \"\",\n      description: \"\"\n    }\n  });\n  const reviewComponent = [];\n  const params = useParams();\n  useEffect(() => {\n    Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId).then(function (response) {\n      setMovie(response.data);\n      setCurMovieID(response.data._id);\n      setCurMovieTitle(response.data.movieTitle);\n    });\n  }, []);\n  useEffect(() => {\n    getReviews();\n  }, [movie]);\n\n  const clear = () => {\n    setReviewText(\"\");\n  };\n\n  function getReviews() {\n    Axios.get('http://localhost:8000/api/reviews/getReviewsByMovieID/' + curMovieID).then(function (response) {\n      setReviewSet(response.data);\n      console.log(\"get\");\n    });\n  }\n\n  function addNewReview() {\n    if (loggedIn) {\n      Axios.post('http://localhost:8000/api/reviews', {\n        reviewText,\n        username,\n        curMovieID\n      }).then(response => {\n        console.log(\"Added review\");\n        getReviews();\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"User must be logged in to submit review\");\n    }\n  }\n\n  function showReview() {\n    Axios.get('http://localhost:8000/api/reviews/getByUsername/', {\n      username\n    }).then(response => {\n      console.log(\"show review\");\n      getReviews();\n    }).catch(error => console.log(error));\n  }\n\n  function deleteReview(e) {\n    if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else if (!username === e.target.value) {\n      alert(\"You must be the owner to edit\");\n    } else {\n      console.log(\"You are not the owner of this review\");\n      Axios.delete('http://localhost:8000/api/reviews/' + e.target.id).then(response => {\n        console.log(\"deleted review\");\n        getReviews();\n      }).catch(error => console.log(error));\n    }\n  }\n\n  function editMovie(e) {\n    if (loggedIn) {\n      console.log(e.target.value.movieTitle);\n      Axios.put('http://localhost:8000/api/movies/' + curMovieID, {\n        newMovieInfo\n      }).then(response => {\n        console.log(\"updated movie\");\n        console.log(response.data);\n        navigate('/home/');\n      }).catch(error => console.log(error));\n    } else {\n      console.log(\"Must be logged in to edit\");\n    }\n  }\n\n  function editReview(e) {\n    if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else if (!username === e.target.value) {\n      alert(\"You must be the owner to edit\");\n    } else {\n      console.log(\"target update id: \" + e.target.id);\n      console.log(\"target update text: \" + submitText);\n      Axios.put('http://localhost:8000/api/reviews/' + e.target.id, {\n        submitText,\n        username,\n        curMovieID\n      }).then(response => {\n        console.log(\"updated review\");\n        setSubmitText('');\n      }).catch(error => console.log(error));\n    }\n  }\n\n  function enableReviewEdit(e) {\n    if (loggedIn && username !== e.target.value) {\n      alert(\"Must be owner to edit\");\n    } else if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else {\n      setShowReviewEdit(!showReviewEdit);\n    }\n  }\n\n  function enableMovieEdit(e) {\n    if (!loggedIn) {\n      alert(\"Must be logged in to edit\");\n    } else {\n      setShowMovieEdit(!showMovieEdit);\n    }\n  }\n\n  function handleMovieEditChange(e) {\n    console.log(\"name: \" + e.target.name);\n    console.log(\"value: \" + e.target.value);\n    setNewMovieInfo({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  if (!movie) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Movie loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }, this);\n  }\n\n  for (let review of reviewSet) {\n    if (review._id !== undefined) {\n      console.log(review._id);\n      reviewComponent.push( /*#__PURE__*/_jsxDEV(Card, {\n        variant: \"outlined\",\n        id: review._id,\n        children: /*#__PURE__*/_jsxDEV(CardContent, {\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: review.owner\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [\"Published \", String(review.creationDate).slice(0, 10)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: review.reviewText\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [/*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: enableReviewEdit,\n                  value: review.owner,\n                  id: review._id,\n                  label: \"edit\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 13\n                }, this), showReviewEdit && /*#__PURE__*/_jsxDEV(TextField, {\n                  size: \"small\",\n                  onChange: e => {\n                    setSubmitText(e.target.value);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [showReviewEdit && /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: editReview,\n                  value: review.owner,\n                  id: review._id,\n                  children: \"Submit Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 13\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  size: \"large\",\n                  onClick: deleteReview,\n                  value: review.owner,\n                  id: review._id,\n                  label: \"delete\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 13\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this));\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Typography, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: movie.movieTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Movie Image will be displayed here\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"Director: \", movie.director]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Date Created: \", String(movie.releaseDate).slice(0, 10)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: [\"Description: \", movie.description]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(TextField, {\n              fullWidth: true,\n              margin: 'dense',\n              label: \"Review Content\",\n              value: reviewText,\n              onChange: e => setReviewText(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 259,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                showReview();\n              },\n              children: \"Show Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                addNewReview();\n                clear();\n              },\n              children: \"Submit Review\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 265,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reviews\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 26\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }, this), reviewComponent, /*#__PURE__*/_jsxDEV(Button, {\n      onClick: enableMovieEdit,\n      children: \"Edit Movie\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }, this), showMovieEdit && /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          margin: 'dense',\n          name: \"movieTitle\",\n          label: \"New Movie Title\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          margin: 'dense',\n          name: \"description\",\n          label: \"New Movie Description\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          margin: 'dense',\n          name: \"director\",\n          label: \"New Movie Director\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          margin: 'dense',\n          name: \"genre\",\n          label: \"New Movie Genre\",\n          size: \"small\",\n          onChange: handleMovieEditChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: editMovie,\n          children: \"Submit Movie Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MovieEntry, \"twC+K/2LlQhybFA9k4LLOj7Jqrg=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = MovieEntry;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieEntry\");","map":{"version":3,"sources":["/Users/christopherlee/Git/CS5610/chris-h-colin-n-chris-l-project3/src/components/MovieEntry.jsx"],"names":["Axios","React","useState","useEffect","useContext","useCallback","useParams","useNavigate","Context","Card","CardContent","Typography","Button","TextField","MovieEntry","props","navigate","username","setUsername","loggedIn","setLoggedIn","movie","setMovie","reviewText","setReviewText","curMovieTitle","setCurMovieTitle","curMovieID","setCurMovieID","reviewSet","setReviewSet","showReviewEdit","setShowReviewEdit","submitText","setSubmitText","showMovieEdit","setShowMovieEdit","newMovieInfo","setNewMovieInfo","newMovie","movieTitle","director","genre","description","reviewComponent","params","get","movieId","then","response","data","_id","getReviews","clear","console","log","addNewReview","post","catch","error","showReview","deleteReview","e","alert","target","value","delete","id","editMovie","put","editReview","enableReviewEdit","enableMovieEdit","handleMovieEditChange","name","review","undefined","push","owner","String","creationDate","slice","releaseDate"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,WAAjD,QAAoE,OAApE;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;AAEA,eAAe,SAASC,UAAT,CAAoBC,KAApB,EAA2B;AAAA;;AAEtC,QAAMC,QAAQ,GAAGT,WAAW,EAA5B;AACA,QAAM;AAACU,IAAAA,QAAD;AAAWC,IAAAA,WAAX;AAAwBC,IAAAA,QAAxB;AAAkCC,IAAAA;AAAlC,MAAiDhB,UAAU,CAACI,OAAD,CAAjE;AACA,QAAM,CAACa,KAAD,EAAQC,QAAR,IAAoBpB,QAAQ,EAAlC;AACA,QAAM,CAACqB,UAAD,EAAaC,aAAb,IAA8BtB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACuB,aAAD,EAAgBC,gBAAhB,IAAoCxB,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM,CAACyB,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC2B,SAAD,EAAYC,YAAZ,IAA4B5B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC6B,cAAD,EAAiBC,iBAAjB,IAAsC9B,QAAQ,CAAC,KAAD,CAApD;AACA,QAAM,CAAC+B,UAAD,EAAaC,aAAb,IAA8BhC,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACiC,aAAD,EAAgBC,gBAAhB,IAAoClC,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAACmC,YAAD,EAAeC,eAAf,IAAkCpC,QAAQ,CAAE;AAACqC,IAAAA,QAAQ,EAAE;AACzDC,MAAAA,UAAU,EAAE,EAD6C;AAEzDC,MAAAA,QAAQ,EAAE,EAF+C;AAGzDC,MAAAA,KAAK,EAAE,EAHkD;AAIzDC,MAAAA,WAAW,EAAE;AAJ4C;AAAX,GAAF,CAAhD;AAMA,QAAMC,eAAe,GAAG,EAAxB;AACA,QAAMC,MAAM,GAAGvC,SAAS,EAAxB;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACZH,IAAAA,KAAK,CAAC8C,GAAN,CAAU,8CAA8CD,MAAM,CAACE,OAA/D,EACKC,IADL,CACU,UAASC,QAAT,EAAmB;AACzB3B,MAAAA,QAAQ,CAAC2B,QAAQ,CAACC,IAAV,CAAR;AACAtB,MAAAA,aAAa,CAACqB,QAAQ,CAACC,IAAT,CAAcC,GAAf,CAAb;AACAzB,MAAAA,gBAAgB,CAACuB,QAAQ,CAACC,IAAT,CAAcV,UAAf,CAAhB;AACC,KALL;AAMH,GAPQ,EAON,EAPM,CAAT;AASArC,EAAAA,SAAS,CAAC,MAAM;AACZiD,IAAAA,UAAU;AACb,GAFQ,EAEN,CAAC/B,KAAD,CAFM,CAAT;;AAIA,QAAMgC,KAAK,GAAG,MAAM;AAChB7B,IAAAA,aAAa,CAAC,EAAD,CAAb;AACH,GAFD;;AAIA,WAAS4B,UAAT,GAAsB;AAClBpD,IAAAA,KAAK,CAAC8C,GAAN,CAAU,2DAA2DnB,UAArE,EACKqB,IADL,CACU,UAAUC,QAAV,EAAoB;AACtBnB,MAAAA,YAAY,CAACmB,QAAQ,CAACC,IAAV,CAAZ;AACAI,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,KAJL;AAKH;;AAED,WAASC,YAAT,GAAwB;AACpB,QAAIrC,QAAJ,EAAc;AACVnB,MAAAA,KAAK,CAACyD,IAAN,CAAW,mCAAX,EAAgD;AAAClC,QAAAA,UAAD;AAAaN,QAAAA,QAAb;AAAuBU,QAAAA;AAAvB,OAAhD,EACKqB,IADL,CACUC,QAAQ,IAAI;AACdK,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAH,QAAAA,UAAU;AACb,OAJL,EAKKM,KALL,CAKWC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CALpB;AAMH,KAPD,MAOO;AACHL,MAAAA,OAAO,CAACC,GAAR,CAAY,yCAAZ;AACH;AACJ;;AAED,WAASK,UAAT,GAAsB;AACd5D,IAAAA,KAAK,CAAC8C,GAAN,CAAU,kDAAV,EAA8D;AAAC7B,MAAAA;AAAD,KAA9D,EACK+B,IADL,CACUC,QAAQ,IAAI;AACdK,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACAH,MAAAA,UAAU;AACb,KAJL,EAKKM,KALL,CAKWC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CALpB;AAMP;;AAED,WAASE,YAAT,CAAsBC,CAAtB,EAAyB;AACrB,QAAI,CAAC3C,QAAL,EAAe;AACX4C,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAFD,MAEO,IAAI,CAAC9C,QAAD,KAAc6C,CAAC,CAACE,MAAF,CAASC,KAA3B,EAAkC;AACrCF,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACH,KAFM,MAEA;AACHT,MAAAA,OAAO,CAACC,GAAR,CAAY,sCAAZ;AACAvD,MAAAA,KAAK,CAACkE,MAAN,CAAa,uCAAuCJ,CAAC,CAACE,MAAF,CAASG,EAA7D,EACKnB,IADL,CACUC,QAAQ,IAAI;AACdK,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACAH,QAAAA,UAAU;AACb,OAJL,EAKKM,KALL,CAKWC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CALpB;AAMH;AACJ;;AAED,WAASS,SAAT,CAAmBN,CAAnB,EAAsB;AAClB,QAAI3C,QAAJ,EAAc;AACVmC,MAAAA,OAAO,CAACC,GAAR,CAAYO,CAAC,CAACE,MAAF,CAASC,KAAT,CAAezB,UAA3B;AACAxC,MAAAA,KAAK,CAACqE,GAAN,CAAU,sCAAuC1C,UAAjD,EAA8D;AAACU,QAAAA;AAAD,OAA9D,EACKW,IADL,CACUC,QAAQ,IAAI;AACdK,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACC,IAArB;AACAlC,QAAAA,QAAQ,CAAC,QAAD,CAAR;AACH,OALL,EAMK0C,KANL,CAMWC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CANpB;AAOH,KATD,MASO;AACHL,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACH;AACJ;;AAED,WAASe,UAAT,CAAoBR,CAApB,EAAuB;AACnB,QAAI,CAAC3C,QAAL,EAAe;AACX4C,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAFD,MAEO,IAAI,CAAC9C,QAAD,KAAc6C,CAAC,CAACE,MAAF,CAASC,KAA3B,EAAkC;AACrCF,MAAAA,KAAK,CAAC,+BAAD,CAAL;AACH,KAFM,MAEA;AACHT,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAuBO,CAAC,CAACE,MAAF,CAASG,EAA5C;AACAb,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAyBtB,UAArC;AACAjC,MAAAA,KAAK,CAACqE,GAAN,CAAU,uCAAwCP,CAAC,CAACE,MAAF,CAASG,EAA3D,EAAgE;AAAClC,QAAAA,UAAD;AAAahB,QAAAA,QAAb;AAAuBU,QAAAA;AAAvB,OAAhE,EACKqB,IADL,CACUC,QAAQ,IAAI;AACdK,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACArB,QAAAA,aAAa,CAAC,EAAD,CAAb;AACH,OAJL,EAKKwB,KALL,CAKWC,KAAK,IAAIL,OAAO,CAACC,GAAR,CAAYI,KAAZ,CALpB;AAMH;AACJ;;AAED,WAASY,gBAAT,CAA0BT,CAA1B,EAA6B;AACzB,QAAI3C,QAAQ,IAAIF,QAAQ,KAAK6C,CAAC,CAACE,MAAF,CAASC,KAAtC,EAA6C;AACzCF,MAAAA,KAAK,CAAC,uBAAD,CAAL;AACH,KAFD,MAEO,IAAI,CAAC5C,QAAL,EAAe;AAClB4C,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAFM,MAEA;AACH/B,MAAAA,iBAAiB,CAAC,CAACD,cAAF,CAAjB;AACH;AACJ;;AAED,WAASyC,eAAT,CAAyBV,CAAzB,EAA4B;AACxB,QAAI,CAAC3C,QAAL,EAAe;AACX4C,MAAAA,KAAK,CAAC,2BAAD,CAAL;AACH,KAFD,MAEO;AACH3B,MAAAA,gBAAgB,CAAC,CAACD,aAAF,CAAhB;AACH;AACJ;;AAED,WAASsC,qBAAT,CAA+BX,CAA/B,EAAkC;AAC9BR,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAWO,CAAC,CAACE,MAAF,CAASU,IAAhC;AACApB,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAYO,CAAC,CAACE,MAAF,CAASC,KAAjC;AACA3B,IAAAA,eAAe,CAAC;AACZ,OAACwB,CAAC,CAACE,MAAF,CAASU,IAAV,GAAiBZ,CAAC,CAACE,MAAF,CAASC;AADd,KAAD,CAAf;AAGH;;AAED,MAAI,CAAC5C,KAAL,EAAY;AACR,wBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AAGH;;AAED,OAAK,IAAIsD,MAAT,IAAmB9C,SAAnB,EAA8B;AAC1B,QAAI8C,MAAM,CAACxB,GAAP,KAAeyB,SAAnB,EAA8B;AAC9BtB,MAAAA,OAAO,CAACC,GAAR,CAAYoB,MAAM,CAACxB,GAAnB;AACAP,MAAAA,eAAe,CAACiC,IAAhB,eACA,QAAC,IAAD;AAAM,QAAA,OAAO,EAAC,UAAd;AAAyB,QAAA,EAAE,EAAEF,MAAM,CAACxB,GAApC;AAAA,+BACA,QAAC,WAAD;AAAA,iCACA,QAAC,UAAD;AAAA,mCACA;AAAA,sCACI;AAAA,0BAAKwB,MAAM,CAACG;AAAZ;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAA,yCAAcC,MAAM,CAACJ,MAAM,CAACK,YAAR,CAAN,CAA4BC,KAA5B,CAAkC,CAAlC,EAAqC,EAArC,CAAd;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAA,0BAAIN,MAAM,CAACpD;AAAX;AAAA;AAAA;AAAA;AAAA,sBAJJ,eAKI;AAAA;AAAA;AAAA;AAAA,sBALJ,eAMI;AAAA,wCACA,QAAC,MAAD;AACI,kBAAA,IAAI,EAAC,OADT;AAEI,kBAAA,OAAO,EAAEgD,gBAFb;AAGI,kBAAA,KAAK,EAAEI,MAAM,CAACG,KAHlB;AAII,kBAAA,EAAE,EAAEH,MAAM,CAACxB,GAJf;AAKI,kBAAA,KAAK,EAAC,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADA,EAUCpB,cAAc,iBACf,QAAC,SAAD;AACI,kBAAA,IAAI,EAAC,OADT;AAEI,kBAAA,QAAQ,EAAG+B,CAAD,IAAO;AACb5B,oBAAAA,aAAa,CAAC4B,CAAC,CAACE,MAAF,CAASC,KAAV,CAAb;AACH;AAJL;AAAA;AAAA;AAAA;AAAA,wBAXA;AAAA;AAAA;AAAA;AAAA;AAAA,sBANJ,eAyBI;AAAA,2BACClC,cAAc,iBACf,QAAC,MAAD;AACI,kBAAA,IAAI,EAAC,OADT;AAEI,kBAAA,OAAO,EAAEuC,UAFb;AAGI,kBAAA,KAAK,EAAEK,MAAM,CAACG,KAHlB;AAII,kBAAA,EAAE,EAAEH,MAAM,CAACxB,GAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFA,eAWA,QAAC,MAAD;AACI,kBAAA,IAAI,EAAC,OADT;AAEI,kBAAA,OAAO,EAAEU,YAFb;AAGI,kBAAA,KAAK,EAAEc,MAAM,CAACG,KAHlB;AAII,kBAAA,EAAE,EAAEH,MAAM,CAACxB,GAJf;AAKI,kBAAA,KAAK,EAAC,QALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAXA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAzBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cADA;AAuDH;AACJ;;AAWG,sBACI;AAAA,4BACI,QAAC,IAAD;AAAA,6BACI,QAAC,WAAD;AAAA,+BACI,QAAC,UAAD;AAAA,iCACI;AAAA,oCACA;AAAA,wBACK9B,KAAK,CAACmB;AADX;AAAA;AAAA;AAAA;AAAA,oBADA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJA,eAOA;AAAA,uCACenB,KAAK,CAACoB,QADrB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPA,eAUA;AAAA,2CACmBsC,MAAM,CAAC1D,KAAK,CAAC6D,WAAP,CAAN,CAA0BD,KAA1B,CAAgC,CAAhC,EAAmC,EAAnC,CADnB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVA,eAaA;AAAA,0CACkB5D,KAAK,CAACsB,WADxB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbA,eAiBA,QAAC,SAAD;AACI,cAAA,SAAS,EAAE,IADf;AAEI,cAAA,MAAM,EAAE,OAFZ;AAGI,cAAA,KAAK,EAAE,gBAHX;AAII,cAAA,KAAK,EAAEpB,UAJX;AAKI,cAAA,QAAQ,EAAEuC,CAAC,IAAItC,aAAa,CAACsC,CAAC,CAACE,MAAF,CAASC,KAAV;AALhC;AAAA;AAAA;AAAA;AAAA,oBAjBA,eAwBA;AAAA;AAAA;AAAA;AAAA,oBAxBA,eA0BA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAE,MAAM;AAACL,gBAAAA,UAAU;AAAI,eAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA1BA,eA8BA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAE,MAAM;AAACJ,gBAAAA,YAAY;AAAIH,gBAAAA,KAAK;AAAI,eAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAyCI,QAAC,UAAD;AAAA,6BAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAb;AAAA;AAAA;AAAA;AAAA,YAzCJ,EA0CKT,eA1CL,eA2CI,QAAC,MAAD;AAAQ,MAAA,OAAO,EAAE4B,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA3CJ,EA8CKrC,aAAa,iBACV,QAAC,IAAD;AAAA,8BACI;AAAA,+BACA,QAAC,SAAD;AACI,UAAA,MAAM,EAAE,OADZ;AAEI,UAAA,IAAI,EAAC,YAFT;AAGI,UAAA,KAAK,EAAE,iBAHX;AAII,UAAA,IAAI,EAAC,OAJT;AAKI,UAAA,QAAQ,EACJsC;AANR;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cADJ,eAYI;AAAA,+BACA,QAAC,SAAD;AACI,UAAA,MAAM,EAAE,OADZ;AAEI,UAAA,IAAI,EAAC,aAFT;AAGI,UAAA,KAAK,EAAE,uBAHX;AAII,UAAA,IAAI,EAAC,OAJT;AAKI,UAAA,QAAQ,EACJA;AANR;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAZJ,eAuBI;AAAA,+BACA,QAAC,SAAD;AACI,UAAA,MAAM,EAAE,OADZ;AAEI,UAAA,IAAI,EAAC,UAFT;AAGI,UAAA,KAAK,EAAE,oBAHX;AAII,UAAA,IAAI,EAAC,OAJT;AAKI,UAAA,QAAQ,EACJA;AANR;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAvBJ,eAkCI;AAAA,+BACA,QAAC,SAAD;AACI,UAAA,MAAM,EAAE,OADZ;AAEI,UAAA,IAAI,EAAC,OAFT;AAGI,UAAA,KAAK,EAAE,iBAHX;AAII,UAAA,IAAI,EAAC,OAJT;AAKI,UAAA,QAAQ,EACJA;AANR;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cAlCJ,eA6CI;AAAA,+BACA,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAEL,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cA7CJ;AAAA;AAAA;AAAA;AAAA;AAAA,YA/CR;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAsGH;;GAhUuBtD,U;UAEHP,W,EAiBFD,S;;;KAnBKQ,U","sourcesContent":["import Axios from 'axios';\nimport React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { Context } from \"../App.jsx\";\nimport Card from '@mui/material/Card';\nimport CardContent from '@mui/material/CardContent';\nimport Typography from '@mui/material/Typography';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\n\nexport default function MovieEntry(props) {\n\n    const navigate = useNavigate();\n    const {username, setUsername, loggedIn, setLoggedIn} = useContext(Context);\n    const [movie, setMovie] = useState();\n    const [reviewText, setReviewText] = useState(\"\");\n    const [curMovieTitle, setCurMovieTitle] = useState('');\n    const [curMovieID, setCurMovieID] = useState('');\n    const [reviewSet, setReviewSet] = useState([]);\n    const [showReviewEdit, setShowReviewEdit] = useState(false);\n    const [submitText, setSubmitText] = useState(\"\");\n    const [showMovieEdit, setShowMovieEdit] = useState(false);\n    const [newMovieInfo, setNewMovieInfo] = useState( {newMovie: {\n        movieTitle: \"\",\n        director: \"\",\n        genre: \"\",\n        description: \"\",\n    }});\n    const reviewComponent = [];\n    const params = useParams();\n\n    useEffect(() => {\n        Axios.get('http://localhost:8000/api/movies/movieID/' + params.movieId)\n            .then(function(response) {\n            setMovie(response.data);\n            setCurMovieID(response.data._id);\n            setCurMovieTitle(response.data.movieTitle);\n            })\n    }, []);\n\n    useEffect(() => {\n        getReviews();\n    }, [movie]);\n\n    const clear = () => {\n        setReviewText(\"\");\n    };\n\n    function getReviews() {\n        Axios.get('http://localhost:8000/api/reviews/getReviewsByMovieID/' + curMovieID)\n            .then(function (response) {\n                setReviewSet(response.data);\n                console.log(\"get\");\n            })\n    }\n\n    function addNewReview() {\n        if (loggedIn) {\n            Axios.post('http://localhost:8000/api/reviews', {reviewText, username, curMovieID})\n                .then(response => {\n                    console.log(\"Added review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"User must be logged in to submit review\");\n        }\n    }\n\n    function showReview() {\n            Axios.get('http://localhost:8000/api/reviews/getByUsername/', {username})\n                .then(response => {\n                    console.log(\"show review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n    }\n\n    function deleteReview(e) {\n        if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else if (!username === e.target.value) {\n            alert(\"You must be the owner to edit\");\n        } else {\n            console.log(\"You are not the owner of this review\")\n            Axios.delete('http://localhost:8000/api/reviews/' + e.target.id)\n                .then(response => {\n                    console.log(\"deleted review\");\n                    getReviews();\n                })\n                .catch(error => console.log(error));\n        }\n    }\n\n    function editMovie(e) {\n        if (loggedIn) {\n            console.log(e.target.value.movieTitle);\n            Axios.put('http://localhost:8000/api/movies/' +  curMovieID , {newMovieInfo})\n                .then(response => {\n                    console.log(\"updated movie\");\n                    console.log(response.data);\n                    navigate('/home/');\n                })\n                .catch(error => console.log(error));\n        } else {\n            console.log(\"Must be logged in to edit\")\n        }\n    }\n\n    function editReview(e) {\n        if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else if (!username === e.target.value) {\n            alert(\"You must be the owner to edit\");\n        } else {\n            console.log(\"target update id: \" + e.target.id);\n            console.log(\"target update text: \" + submitText);\n            Axios.put('http://localhost:8000/api/reviews/' +  e.target.id , {submitText, username, curMovieID})\n                .then(response => {\n                    console.log(\"updated review\");\n                    setSubmitText('');\n                })\n                .catch(error => console.log(error));\n        }\n    }\n\n    function enableReviewEdit(e) {\n        if (loggedIn && username !== e.target.value) {\n            alert(\"Must be owner to edit\");\n        } else if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else {\n            setShowReviewEdit(!showReviewEdit);\n        }\n    }\n\n    function enableMovieEdit(e) {\n        if (!loggedIn) {\n            alert(\"Must be logged in to edit\");\n        } else {\n            setShowMovieEdit(!showMovieEdit);\n        }\n    }\n\n    function handleMovieEditChange(e) {\n        console.log(\"name: \" + e.target.name)\n        console.log(\"value: \" + e.target.value)\n        setNewMovieInfo({\n            [e.target.name]: e.target.value\n        })\n    }\n\n    if (!movie) {\n        return (<div>\n            Movie loading...\n        </div>)\n    }\n    \n    for (let review of reviewSet) {\n        if (review._id !== undefined) {\n        console.log(review._id)\n        reviewComponent.push(\n        <Card variant='outlined' id={review._id} >\n        <CardContent>\n        <Typography >\n        <div>\n            <h4>{review.owner}</h4>\n            <p>Published {String(review.creationDate).slice(0, 10)}</p>\n            <br></br>\n            <p>{review.reviewText}</p>\n            <br></br>\n            <p>\n            <Button \n                size='large' \n                onClick={enableReviewEdit} \n                value={review.owner} \n                id={review._id} \n                label='edit'\n                >\n                Edit\n            </Button>\n            {showReviewEdit &&\n            <TextField\n                size='small'\n                onChange={(e) => {\n                    setSubmitText(e.target.value)\n                }}\n            />\n            }\n            </p>\n            <p>\n            {showReviewEdit &&\n            <Button \n                size='large' \n                onClick={editReview} \n                value={review.owner} \n                id={review._id}\n                >\n                    Submit Edit\n            </Button>\n            }\n            <Button \n                size='large' \n                onClick={deleteReview} \n                value={review.owner} \n                id={review._id} \n                label='delete'\n                >\n                Delete\n            </Button>\n            </p>\n        </div>\n        </Typography>\n        </CardContent>\n        </Card>\n        )\n    }\n}\n\n\n\n\n\n\n\n\n\n\n    return (\n        <div>\n            <Card>\n                <CardContent>\n                    <Typography >\n                        <div>\n                        <h1>\n                            {movie.movieTitle} \n                        </h1>\n                        <h3>\n                            Movie Image will be displayed here\n                        </h3>\n                        <h3>\n                            Director: {movie.director}\n                        </h3>\n                        <h4>\n                            Date Created: {String(movie.releaseDate).slice(0, 10)}\n                        </h4>\n                        <h4>\n                            Description: {movie.description}\n                        </h4>\n                        \n                        <TextField \n                            fullWidth={true} \n                            margin={'dense'} \n                            label={\"Review Content\"} \n                            value={reviewText} \n                            onChange={e => setReviewText(e.target.value)} \n                            />\n                        <br/>\n\n                        <Button onClick={() => {showReview();}}>\n                            Show Review\n                        </Button>\n\n                        <Button onClick={() => {addNewReview(); clear();}}>\n                            Submit Review\n                        </Button>\n                        </div>\n                    </Typography>\n                </CardContent>\n            </Card>\n            <Typography ><h3>Reviews</h3></Typography>\n            {reviewComponent}\n            <Button onClick={enableMovieEdit}>\n                Edit Movie\n            </Button>\n            {showMovieEdit && \n                <Card>\n                    <div>\n                    <TextField\n                        margin={'dense'}\n                        name=\"movieTitle\"\n                        label={\"New Movie Title\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        margin={'dense'}\n                        name=\"description\"\n                        label={\"New Movie Description\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        margin={'dense'}\n                        name=\"director\"\n                        label={\"New Movie Director\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <TextField\n                        margin={'dense'}\n                        name=\"genre\"\n                        label={\"New Movie Genre\"}\n                        size='small'\n                        onChange={\n                            handleMovieEditChange\n                        }\n                    />\n                    </div>\n                    <div>\n                    <Button onClick={editMovie}>\n                        Submit Movie Edit\n                    </Button>\n                    </div>\n                </Card>\n                }\n        </div>     \n    )\n}\n"]},"metadata":{},"sourceType":"module"}